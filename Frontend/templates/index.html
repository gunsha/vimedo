<section class="content">
	<div class="row" >
		<div class="col-md-5">
			<div class="box box-solid">
				<div class="box-header with-border">
					<h3 class="box-title">Solicitudes Medicas</h3>
					<div class="box-tools">
						<div class="pull-right has-feedback">
							<input type="text" class="form-control input-sm ng-pristine ng-valid ng-empty ng-touched" ng-model="ctrl.queryS" ng-change="ctrl.filterListS();" placeholder="Filtrar">
							<span class="glyphicon glyphicon-search form-control-feedback"></span>
						</div>
					</div>
				</div>
				<!-- /.box-header -->
				<div class="box-body">
					<div class="box-group" id="accordion">
						<!-- we are adding the .panel class so bootstrap.js collapse plugin detects it -->
						<div class="panel box" ng-repeat="s in ctrl.solicitudes track by $index" ng-class="{'box-success':s.estado === 1,'box-danger':s.estado === 0}">
							<div class="box-header with-border">
								<h4 class="box-title">
									<a data-toggle="collapse" data-parent="#accordion" href="#{{s._id}}" ng-click="ctrl.centrarMapa(s.domicilio.latitud, s.domicilio.longitud)">
										{{s.afiliado.personaFisica.nombre}} {{s.afiliado.personaFisica.apellido}}
									</a>
								</h4>
								<div class="box-tools pull-right">
									<span title="" class="badge" ng-class="{'bg-green':s.estado === 1,'bg-red':s.estado === 0}">{{s.estado === 0 ? 'Pendiente':'En Curso'}}</span>
								</div>
							</div>
							<div id="{{s._id}}" class="panel-collapse collapse">
								<div class="box-body">
									<div class="row-fluid">
										<u>Creado el</u>: {{s.fechaAlta}}
									</div>
									<div class="row-fluid">
										<u>Sintomas</u>:
										<ul>
											<li ng-if="s.sintomasCie.length != 0" ng-repeat="sintoma in s.sintomasCie"> {{sintoma.dec10}}</li>
											<li ng-if="s.sintomas != '' " ng-repeat="sintoma in s.sintomas.split(',')"> {{sintoma}}</li>
											<li ng-if="s.sintomasCie.length == 0 && s.sintomas == ''">No se presentan sintomas.</li>
										</ul>
									</div>
									<div class="row-fluid">
										<u>Tiempo</u>: {{s.horasSintomas}} hs. {{s.minutosSintomas}} min.
									</div>
									<div class="row-fluid">
										<u>Antecedentes Medicos</u>:
										<ul>
											<li ng-if="s.antecedentesCie.length != 0" ng-repeat="antecedentes in s.antecedentesMedicosCie"> {{antecedentes.dec10}}</li>
											<li ng-if="s.antecedentesMedicos != ''" ng-repeat="antecedentes in s.antecedentesMedicos.split(',')"> {{antecedentes}}</li>
											<li ng-if="s.antecedentesMedicos == '' && s.antecedentesMedicosCie.length == 0">No se presentan antecedentes.</li>
										</ul>
									</div>
									<div class="row-fluid" ng-if="s.profesional">
										<p><u>Profesional Asignado</u>:</p>
										<p>{{s.profesional.personaFisica.nombre}} {{s.profesional.personaFisica.apellido}}</p>
									</div>
									<div class="row-fluid">
										<button class="btn btn-sm btn-primary" ng-click="ctrl.vistaAsignarProfesional(s._id)">{{!s.profesional ? 'Asignar':'Cambiar'}} Profesional</button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- /.box-body -->
			</div>
			<!-- /.box -->
		</div>
		<div class="col-md-7">
			<div map-lazy-load="https://maps.google.com/maps/api/js" map-lazy-load-params="{{ctrl.googleMapsUrl}}">
				<ng-map id="map" zoom="16" ng-init="ctrl.initMap()" ></ng-map>
			</div>
		</div>
	</div>
</section>
<div id="modalPro" class="modal fade" tabindex="-1" role="dialog" data-backdrop="static">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title">Selecci&oacute;n de profesional</h4>
				<div class="box-tools">
						<div class="pull-right has-feedback">
							<input type="text" class="form-control input-sm ng-pristine ng-valid ng-empty ng-touched" ng-model="ctrl.queryP" ng-change="ctrl.filterListP();" placeholder="Filtrar">
							<span class="glyphicon glyphicon-search form-control-feedback"></span>
						</div>
					</div>
			</div>
			<div class="modal-body">
				<div class="box-group" id="accordionPro">
					<!-- we are adding the .panel class so bootstrap.js collapse plugin detects it -->
					<div class="panel box" ng-repeat="s in ctrl.profesionales track by $index" ng-class="{'box-success':s.estado === 1,'box-danger':s.estado === 0}">
						<div class="box-header with-border">
							<h4 class="box-title">
								<a data-toggle="collapse" data-parent="#accordionPro" href="#{{s._id}}">
									{{s.personaFisica.nombre}} {{s.personaFisica.apellido}} - Matricula: {{s.matricula}}
								</a>
							</h4>
							<div class="box-tools pull-right">
								<span title="" class="badge" ng-class="{'bg-green': true,'bg-red':false}">Disponible</span>
							</div>
						</div>
						<div id="{{s._id}}" class="panel-collapse collapse">
							<div class="box-body">
								<div class="row-fluid">
									<u>Especialidades</u>:
										<ul>
											<li ng-repeat="esp in s.especialidades"> {{esp.nombre}}</li>
										</ul>
								</div>
								<div class="row-fluid">
									<button class="btn btn-sm btn-primary" ng-click="ctrl.confirmarProfesional(s._id)">Asignar Profesional</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->